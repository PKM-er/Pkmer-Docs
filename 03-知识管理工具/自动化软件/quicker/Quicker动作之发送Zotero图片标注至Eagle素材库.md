---
uid: 20240313014614
title: Quicker åŠ¨ä½œä¹‹å‘é€ Zotero å›¾ç‰‡æ ‡æ³¨è‡³ Eagle ç´ æåº“
tags: [zotero, Eagle, æ–‡çŒ®, å­¦æœ¯ç ”ç©¶]
description: åˆ©ç”¨Quickeråœ¨é˜…è¯»æ–‡çŒ®æ—¶å°†é‡Œé¢çš„ç»å…¸å›¾ç‰‡å’Œé‡è¦ä¿¡æ¯æ•´ç†èµ·æ¥ï¼Œå»ºç«‹ä¸€ä¸ªå›¾ç‰‡ç´ æåº“
author: ç†ŠçŒ«åˆ«ç†¬å¤œ,ImmortalSty
type: other
draft: false
editable: false
modified: 20240317212958
---

# Quicker åŠ¨ä½œä¹‹å‘é€ Zotero å›¾ç‰‡æ ‡æ³¨è‡³ Eagle ç´ æåº“

## æ•ˆæœ

![2024-03-06_Quicker-å‘é€Zoteroå›¾ç‰‡æ ‡æ³¨è‡³Eagleç´ æåº“_IMG-1](https://cdn.pkmer.cn/images/202403130151304.gif!pkmer)

## èƒŒæ™¯

ä¸ºäº†åœ¨é˜…è¯»æ–‡çŒ®æ—¶å°†é‡Œé¢çš„ç»å…¸å›¾ç‰‡å’Œé‡è¦ä¿¡æ¯æ•´ç†èµ·æ¥ï¼Œå»ºç«‹ä¸€ä¸ªå›¾ç‰‡ç´ æåº“è€Œåˆ¶ä½œçš„è¯¥åŠ¨ä½œã€‚æœ‰æ—¶å€™éœ€è¦å‚è€ƒç›¸å…³æ–‡çŒ®çš„ä»‹ç»å’Œæè¿°ï¼Œå°±å‘ç°å•çº¯çš„ md ç¬”è®°ç®¡ç†éš¾ä»¥åšåˆ°å¿«é€Ÿé¢„è§ˆæˆ–è€…è¯´æ˜¯å…¨å±€æŸ¥é˜…å»å¿«é€Ÿå®šä½ã€‚äºæ˜¯å°±æƒ³ä»¥å›¾ç‰‡ä¸ºåŸºå‡†çš„å¡ç‰‡å¼æŸ¥é˜…ï¼Œå›¾ç‰‡ä¸å±€é™äºç§‘ç ”ç»˜å›¾ï¼Œè¿˜å¯ä»¥æ˜¯ç»å…¸çš„æµç¨‹å›¾ï¼Œå…³é”®è¯çš„æ–‡æœ¬æè¿°ä¹‹ç±»çš„ï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘å¾ˆå¿«é€Ÿå®šä½åˆ°å…·ä½“æ–‡çŒ®çš„ç« èŠ‚ï¼Œæˆ‘ä¸ªäººæ˜¯ä½¿ç”¨ Eagle æ¥ç®¡ç†å¹³æ—¶çš„å›¾ç‰‡ç´ æçš„ï¼Œå°±æƒ³ä»¥ Eagle ä¸ºåŸºç¡€å»ºç«‹ä¸€ä¸ª Zotero æ–‡çŒ®ç´ æåº“ã€‚

> Eagle æ˜¯ä¸€æ¬¾å›¾ç‰‡ç´ æç®¡ç†è½¯ä»¶ï¼Œå¯å¸®åŠ©ç”¨æˆ·æœ‰æ•ˆç»„ç»‡ã€ç®¡ç†å’Œä½¿ç”¨å›¾ç‰‡ç´ æã€‚å®ƒæä¾›ç›´è§‚æ˜“ç”¨çš„ç•Œé¢ï¼Œè®©ç”¨æˆ·èƒ½å¿«é€Ÿæµè§ˆå’Œæœç´¢å›¾ç‰‡ç´ æåº“ã€‚æ­¤å¤–ï¼ŒEagle è¿˜æä¾›å¼ºå¤§çš„æ ‡ç­¾å’Œåˆ†ç±»åŠŸèƒ½ï¼Œè®©ç”¨æˆ·æŒ‰éœ€æ•´ç†å’Œå½’ç±»å›¾ç‰‡ç´ æï¼Œåˆ›å»ºè‡ªå·±çš„å›¾ç‰‡ç´ æåº“ã€‚[^1]

ä¸ºäº†æ›´åŠ ä¾¿æ·åœ°å¯¼å…¥å’Œç®¡ç† Zotero çš„æ–‡çŒ®å›¾ç‰‡ï¼Œæˆ‘å°è¯•ä½¿ç”¨ Quicker æ¥å®ç° Zotero å’Œ Eagle çš„è”åŠ¨ã€‚å› ä¸ºæˆ‘å¯¹ Quicker å¹¶ä¸å¾ˆç†Ÿæ‚‰ï¼Œè¿™ä¸ªåŠ¨ä½œä¸»è¦æ˜¯é€šè¿‡ JS å®ç°çš„ã€‚åœ¨é‡åˆ°ä¸€äº›é—®é¢˜æ— æ³•è§£å†³æ—¶ï¼Œæˆ‘å‘ç¾¤å‹ @æ§‘å¤´è„‘ å¯»æ±‚å¸®åŠ©ï¼Œæœ€ç»ˆæ‰é¡ºåˆ©å®Œæˆäº†è¯¥åŠ¨ä½œçš„åˆ¶ä½œï¼Œå†æ¬¡éå¸¸æ„Ÿè°¢ @æ§‘å¤´è„‘ ğŸ˜˜ã€‚

ä»¥ä¸‹æ˜¯ Quicker åŠ¨ä½œçš„åˆ†äº«ã€è®¾è®¡æ€è·¯ã€å‚è€ƒèµ„æ–™ï¼Œä»¥åŠ Quicker ç›¸å…³çš„å¸®åŠ©æ–‡æ¡£è®°å½•ã€‚

> [!tip] å¦‚æœæƒ³å°†å·²æœ‰çš„æ ‡æ³¨å›¾ç‰‡ä¸€æ¬¡æ€§å¯¼å…¥å¯ä»¥å‚è€ƒå¦‚ä¸‹ï¼š
> - [[é€šè¿‡Pythonè„šæœ¬å®ç°Eagleç®¡ç†Zoteroæ ‡æ³¨çš„å›¾ç‰‡]]
> - [[å·¥ä½œæµ-ä»¥å›¾æœå›¾]]

## Quikcer åŠ¨ä½œåˆ†äº«

> [!note]+ Quicker åŠ¨ä½œï¼š[ZoteroToEagle](https://getquicker.net/Sharedaction?code=85b92307-2003-47bd-afea-08dc426a44c3)
> ![2024-03-06_Quicker-å‘é€Zoteroå›¾ç‰‡æ ‡æ³¨è‡³Eagleç´ æåº“_IMG-2](https://cdn.pkmer.cn/images/202403130151305.png!pkmer)

### ä½¿ç”¨æ–¹æ³•

åªéœ€è¦æœ€å¼€å§‹çš„æ—¶å€™é…ç½® Zotero çš„æ•°æ®å­˜å‚¨ä½ç½® `ZoteroPath` ï¼Œå¯èƒ½ä¼šè¦ node.js çš„ç¯å¢ƒï¼š

![2024-03-06_Quicker-å‘é€Zoteroå›¾ç‰‡æ ‡æ³¨è‡³Eagleç´ æåº“_IMG-3](https://cdn.pkmer.cn/images/202403130151306.png!pkmer)

## åˆ¶ä½œæ€è·¯

ç”± Quicker æ¥æ‰§è¡Œ `Ctrl + C` å¤åˆ¶æ ‡æ³¨ä¿¡æ¯ `{ZoteroText}`ï¼Œ`Ctrl + Shift + C` å¤åˆ¶æ¡ç›® `{ZoteroItem}`ï¼Œä»¥åŠ Zotero çš„æ•°æ®å­˜å‚¨ä½ç½® `{ZoteroPath}`ï¼Œé€šè¿‡ node.js æ¥å‘é€å‚æ•°åˆ° `Zotero2Eagle.js` ä¸­ï¼š

```js
node Zotero2Eagle.js "{ZoteroPath}" "{ZoteroText}" "{ZoteroItem}"
```

è¯¥ `Zotero2Eagle.js` è„šæœ¬æ–‡ä»¶å·²æ•´åˆåˆ° Quicker ä¸­ï¼Œç¬¬ä¸€æ¬¡ä¼šåŠ è½½ Quicker åŠ¨ä½œä¼šåœ¨ `{ZoteroPath}` æ–‡ä»¶å¤¹ä¸‹ (eg: `D:/Zotero`) ç”Ÿæˆè¯¥è„šæœ¬æ–‡ä»¶ï¼š

![2024-03-06_Quicker-å‘é€Zoteroå›¾ç‰‡æ ‡æ³¨è‡³Eagleç´ æåº“_IMG-4](https://cdn.pkmer.cn/images/202403130151307.png!pkmer)

### Zotero2Eagle.js æºç 

```js
const process = require('process');
const zoteroPath = process.argv[2] ? process.argv[2] : "";

if (!zoteroPath) {
    console.log("No zoteroPath found");
    process.exit(0);
}

const ZoteroText = process.argv[3] ? process.argv[3] : "";
const ZoteroItem = process.argv[4] ? process.argv[4] : "";

const { log } = console;
log({ ZoteroText, ZoteroItem });

const { zotero_link, zotero_comment, zotero_image, zotero_year } = match_zotero_data(ZoteroText);
log({ zotero_link, zotero_comment, zotero_image, zotero_year });
if (!zotero_image) {
    console.log("No image found");
    process.exit(0);
}

// Zotero Library è·¯å¾„
const zotero_image_path = `${zoteroPath}/cache/library/${zotero_image}`;

const { zotero_title, zotero_author } = match_zotero_item(ZoteroItem);

const data = {
    "path": zotero_image_path,
    "website": zotero_link,
    "tags": [zotero_author, zotero_year, zotero_title].filter(Boolean),
    "annotation": zotero_comment,
    "folderId": "KEHB8I2C9F23H",
};

const requestOptions = {
    method: 'POST',
    body: JSON.stringify(data),
    redirect: 'follow'
};

fetch("http://localhost:41595/api/item/addFromPath", requestOptions)
    .then(response => response.json())
    .then(result => console.log(result))
    .catch(error => console.log('error', error));

function match_zotero_data(text) {
    const regex_link = /\[pdf\]\((.*)\)\)/;
    const regex_comment = /.*\)\).*\)\)([\s\S]*)/;
    const regex_image = /annotation=(\w*)/;
    const regex_year = /,\s(\d{4})/;

    const zotero_link = text.match(regex_link) ? text.match(regex_link)[1] : "";
    const zotero_comment = text.match(regex_comment) ? text.match(regex_comment)[1] : "";
    const zotero_image = text.match(regex_image) ? text.match(regex_image)[1] + ".png" : "";
    const zotero_year = text.match(regex_year) ? text.match(regex_year)[1] : "";


    return { zotero_link, zotero_comment, zotero_image, zotero_year };
}

function match_zotero_item(text) {
    const regex_title = /(ã€Š.*ã€‹)/;
    const regex_author = /\]\s(.*?),/;

    const zotero_title = text.match(regex_title) ? text.match(regex_title)[1] : "";
    const zotero_author = text.match(regex_author) ? text.match(regex_author)[1] : "";

    return { zotero_title, zotero_author };
}

```

### ä¿®æ”¹å‚æ•°

```js
const data = {
    "path": zotero_image_path, // æœ¬åœ°å›¾ç‰‡è·¯å¾„
    "website": zotero_link, // Zoteroå¤–éƒ¨å›é“¾
    "tags": [zotero_author, zotero_year, zotero_title].filter(Boolean),  // æ¡ç›®çš„ä½œè€…ï¼Œå¹´ä»½ï¼Œæ ‡é¢˜ä¿¡æ¯ï¼Œå¦‚æœæå–æˆåŠŸ(å¸ƒå°”å€¼)åˆ™æ·»åŠ 
    "annotation": zotero_comment, // Zoteroçš„å›¾ç‰‡æ³¨é‡Šä¿¡æ¯
    "folderId": "KEHB8I2C9F23H", // éšä¾¿å¡«çš„ï¼Œå¦‚æœæƒ³æŒ‡å®šEagleçš„æ–‡ä»¶å¤¹,è¯·å°†æ–‡ä»¶å¤¹çš„IDæ›¿æ¢ä¸€ä¸‹å°±è¡Œ
};
```

> è¿˜æœ‰ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚ `name` å›¾ç‰‡åçš„è®¾ç½®ï¼Œä¸è®¾ç½®åˆ™ä¿æŒé»˜è®¤çš„å›¾ç‰‡åç§°ï¼Œè¿˜æœ‰ `token` çš„è®¾ç½®ï¼Œè¯¦ç»†å¯å‚è€ƒï¼š[EagleAPI-æ·»åŠ æœ¬åœ°æ–‡ä»¶](https://www.yuque.com/augus-gsjgn/eagle-api/suaf2q)

## å‚è€ƒèµ„æ–™

- [å¦‚ä½•å°†å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™ Node.js åº”ç”¨ç¨‹åºï¼Ÿ](https://ivwv.netlify.app/posts/technology/node/how-to-pass-cmd-line-args-to-node.html#%E5%B0%86%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92%E7%BB%99-node-js-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F)
- [EagleAPI-æ·»åŠ æœ¬åœ°æ–‡ä»¶(apiã€itemã€addFromPath)](https://www.yuque.com/augus-gsjgn/eagle-api/suaf2q)
- [[å·¥ä½œæµ-ä»¥å›¾æœå›¾]]

### Quicker çš„ä¸€äº›å¸®åŠ©æ–‡æ¡£

- [Quickerç”¨æˆ·æ‰‹å†Œ - Quicker](https://getquicker.net/KC/Help)
- [Tinyæ–‡æœ¬ç¼–è¾‘å™¨ - by é¾™å°‘ - åŠ¨ä½œä¿¡æ¯ - Quicker](https://getquicker.net/Sharedaction?code=679da246-89af-4a67-f467-08d8f95763cd)
	- ç”¨äºç¼–è¾‘ Quicker åŠ¨ä½œçš„ä»‹ç»æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œéå¸¸æ¨è

[^1]: [[é€šè¿‡Pythonè„šæœ¬å®ç°Eagleç®¡ç†Zoteroæ ‡æ³¨çš„å›¾ç‰‡]]