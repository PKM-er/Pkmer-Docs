---
uid: 2023120719381211
title: Obsidian æ’ä»¶ï¼šã€Readmeã€‘Obsidian Query Language
tags: ['æœç´¢/æ’åº', 'obsidianæ’ä»¶', 'readme']
description: .è¿™ä¸ªæ’ä»¶å…è®¸æ‚¨åœ¨Obsidianä¸­æŸ¥è¯¢ç¬”è®°å¹¶è¡¨ç¤ºæ•°æ®ã€‚
author: AI
type: readme
draft: false
editable: false
modified: 20230101000000
---

# Obsidian æ’ä»¶ï¼šã€Readmeã€‘Obsidian Query Language

> [!Note] æ’ä»¶åç‰‡
> - æ’ä»¶åç§°ï¼šObsidian Query Language
> - æ’ä»¶ä½œè€…ï¼šJoost Plattel
> - æ’ä»¶è¯´æ˜ï¼š.è¿™ä¸ªæ’ä»¶å…è®¸æ‚¨åœ¨ Obsidian ä¸­æŸ¥è¯¢ç¬”è®°å¹¶è¡¨ç¤ºæ•°æ®ã€‚
> - æ’ä»¶åˆ†ç±»ï¼š[' æœç´¢/æ’åº ', 'obsidian æ’ä»¶ ', 'readme']
> - é¡¹ç›®åœ°å€ï¼š[ç‚¹æˆ‘è®¿é—®](https://github.com/jplattel/obsidian-query-language)
> - å›½å†…ä¸‹è½½åœ°å€ï¼š[ä¸‹è½½å®‰è£…](https://pkmer.cn/products/plugin/pluginMarket/?obsidian-query-language)

## æ¦‚è¿°

.è¿™ä¸ªæ’ä»¶å…è®¸æ‚¨åœ¨ Obsidian ä¸­æŸ¥è¯¢ç¬”è®°å¹¶è¡¨ç¤ºæ•°æ®ã€‚

![Obsidian Query Language](https://cdn.pkmer.cn/covers/obsidian-query-language.png!pkmer)

> [!tip] åŸæ–‡å‡ºå¤„
>
>ä¸‹é¢è‡ªè¿°æ–‡ä»¶çš„æ¥æºäº [Readme](https://ghproxy.net/https://raw.githubusercontent.com/jplattel/obsidian-query-language/main/README.md)
>

---

## Readme(ç¿»è¯‘ï¼‰

ä¸‹é¢æ˜¯ [[obsidian-query-language]] æ’ä»¶çš„è‡ªè¿°ç¿»è¯‘

# Obsidian æŸ¥è¯¢è¯­è¨€

è¿™æ˜¯ Obsidian çš„ä¸€ä¸ªæ’ä»¶ï¼ˆ<<https://obsidian.mdï¼‰ï¼Œå®ƒå…è®¸æ‚¨åœ¨ç¬”è®°æœ¬å†…æŸ¥è¯¢ç¬”è®°å¹¶æ”¶é›†æœ‰å…³æ‚¨çš„å­˜å‚¨åº“çš„ä¿¡æ¯ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»£ç å—ç¼–å†™æŸ¥è¯¢å¹¶è¿›è¡Œé…ç½®ï¼Œæ¸²æŸ“å™¨å°†åœ¨> Markdown é¢„è§ˆä¸­è¾“å‡ºç»“æœï¼š>

![](https://cdn.pkmer.cn/covers/obsidian-query-language_1_0.png!pkmer)

## æ›´æ–°æ—¥å¿—

- **2.1.1**
    - ä¿®å¤äº†å‰ç½®å…ƒæ•°æ®è§£æçš„é”™è¯¯ï¼ˆæ„Ÿè°¢ [chipchipschips](https://github.com/chipschipschips)ï¼‰
- **2.1.0**
    - æ”¹è¿›äº†å¯¹ Liveview çš„æ”¯æŒ
- **2.0.0**
    - _é‡å¤§å˜æ›´_ï¼š`template` é”®ç°åœ¨æ˜¯ 'string|table|list'ã€‚æ ¼å¼åŒ–ç°åœ¨ä½¿ç”¨ `format` é”®ï¼Œå¦‚ç¤ºä¾‹æ‰€ç¤ºã€‚
    - ä»ç´¢å¼•æ„å»ºä¸­åˆ é™¤äº† `this.cachedData`ï¼Œç°åœ¨ç›´æ¥è¯»å–æ–‡ä»¶ã€‚
    - å°†æ¸²æŸ“å™¨ç§»åŠ¨åˆ°å­æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿æ›´å®¹æ˜“è¿›è¡Œé‡æ„ï¼ˆå°†æ¥å¯èƒ½è½¬ç§»åˆ° Svelte ä¸­ï¼‰ã€‚
    - å…¶ä»–æ’ä»¶å¯ä»¥ä½¿ç”¨æœç´¢åŠŸèƒ½ï¼ˆåˆæ­¥å°è¯•ï¼Œæ›´å¤šç»†èŠ‚ç¨åï¼‰ã€‚
    - ç°åœ¨åªéœ€æ›´æ–°å˜åŒ–éƒ¨åˆ†è€Œä¸æ˜¯é‡å»ºæ•´ä¸ªç´¢å¼•ã€‚
- **1.5.0**
    ç°åœ¨å¯ä»¥æŒ‰éšæœºï¼ˆæ´—ç‰Œï¼‰æ’åºã€‚åœ¨ä¿®æ”¹æˆ–é‡å‘½åæ–‡ä»¶æ—¶å¯¹ç´¢å¼•è¿›è¡Œäº†è½»å¾®æ”¹è¿›ã€‚

- **1.4.0**
    åœ¨å­—æ®µè§†å›¾ä¸­ç°åœ¨æ”¯æŒæ ‡ç­¾ã€‚å­—æ®µä¹Ÿé€‚ç”¨äºåˆ—è¡¨è§†å›¾ã€‚

- **1.3.0**
    ç°åœ¨å¯ä»¥æŒ‰åˆ›å»º/ä¿®æ”¹æ—¥æœŸæˆ–ä»»ä½•å…¶ä»–å­—æ®µåœ¨è¡¨æ ¼/åˆ—è¡¨è§†å›¾ä¸­è¿›è¡Œæ’åºã€‚

## å®‰è£…

å°†æ­¤å­˜å‚¨åº“å…‹éš†åˆ° `.obsidian/plugins` æ–‡ä»¶å¤¹ä¸­ï¼Œè¿è¡Œ `yarn && yarn build` æˆ– `npm install && npm run build`ï¼Œç„¶ååœ¨ Obsidian çš„è®¾ç½®ä¸­å¯ç”¨å®ƒã€‚

## ä½¿ç”¨æ’ä»¶å’Œç¤ºä¾‹

æ‚¨å¯ä»¥ä½¿ç”¨ `oql` ä»£ç å—æŸ¥è¯¢æ‚¨çš„ä¿é™©åº“ï¼Œä¾‹å¦‚ï¼š

````markdown
```oql
name: Daily notes
query: "'100 Daily/'"
template: "string"
format: "{name}: {count}"
```
````

è¿™ä¸ªå°å—åœ¨ä¸€ä¸ªç¬”è®°ä¸­å‘ˆç°ä¸ºä¸€ä¸ªæ¨¡æ¿ï¼Œè®¡ç®— `100 Daily` æ–‡ä»¶å¤¹ä¸­çš„ç¬”è®°æ•°é‡ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¾“å‡ºï¼Œå½“æ‚¨æœ‰ 100 ä¸ªæ¯æ—¥ç¬”è®°æ—¶ï¼Œå®ƒå‘ˆç°ä¸º `Daily notes: 100`ã€‚è¿™åªæ˜¯ä¸€ç§åŸºæœ¬çš„æŸ¥è¯¢ä¿é™©åº“çš„æ–¹å¼ã€‚

è¿™äº›æ˜¯é…ç½®ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œè¯·æ³¨æ„æŸäº›å­—æ®µåªé€‚ç”¨äºç‰¹å®šçš„æ¨¡æ¿ï¼ˆä¾‹å¦‚ï¼Œåˆ—è¡¨/è¡¨è§†å›¾ä¸­çš„é™åˆ¶ï¼‰ï¼š

````markdown
```oql
name: Daily notes               # æŸ¥è¯¢çš„åç§°ï¼ˆå¯ä»¥åœ¨æ ¼å¼ä¸­ä½¿ç”¨{name}ï¼‰
query: "'100 Daily/"            # ä¸Fuse.jsä¸€èµ·ä½¿ç”¨çš„å®é™…æŸ¥è¯¢ï¼ˆæ³¨æ„å•å¼•å·'ç”¨äºç²¾ç¡®åŒ¹é…ï¼‰
template: "string"              # æˆ–ä½¿ç”¨"table"æˆ–"list"è¿›è¡Œä¸åŒçš„è¾“å‡º
format: "{name}: {count}"       # è¾“å‡ºçš„æ ¼å¼
badge: true                     # åœ¨å³ä¾§æ˜¾ç¤ºOQLå¾½ç« 
debug: true                     # æ˜¾ç¤ºè°ƒè¯•çª—å£
wrapper: "div"                  # åŒ…è£…å™¨ï¼ˆå¦‚æœæ‚¨æƒ³å‘ˆç°æ ‡é¢˜å¦‚`h1`ï¼‰
limit: 10                       # åœ¨ä½¿ç”¨åˆ—è¡¨æˆ–è¡¨è§†å›¾æ—¶ï¼Œå°†ç»“æœé™åˆ¶ä¸ºN
sort: "title"                   # æˆ–"-title"è¿›è¡Œé™åºæ’åºï¼Œå…¶ä»–é€‰é¡¹ï¼š"modified"ï¼Œ"created"å’Œ"random"
fields: ['title', 'created']    # åœ¨è¡¨è§†å›¾ä¸­æ˜¾ç¤ºçš„å­—æ®µ
includeCurrentNote: false       # é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ’é™¤æ‚¨æ­£åœ¨ç¼–å†™OQLçš„ç¬”è®°
```
````

### å¯ç”¨çš„å ä½ç¬¦æ ¼å¼

{name} ï¼šOQL æŸ¥è¯¢å—çš„åç§°

{count} ï¼šç»“æœè®¡æ•°

{title} ï¼šç»“æœçš„æ ‡é¢˜

{path} ï¼šç»“æœçš„è·¯å¾„

{tags} ï¼šç»“æœçš„æ ‡ç­¾

{index} ï¼šç»“æœçš„ç´¢å¼•

{created} ï¼šç»“æœçš„åˆ›å»ºæ—¥æœŸ

{modified} ï¼šç»“æœçš„ä¿®æ”¹æ—¥æœŸ

æ›´å¤šç¤ºä¾‹ï¼š

* è¯·æ³¨æ„ï¼Œæ­¤æ’ä»¶ä½¿ç”¨çš„ Fuse æŸ¥è¯¢è¯­æ³•ä¸ Obsidian ä¸­çš„å½“å‰æŸ¥è¯¢æ¨¡å‹æˆ–æœç´¢ä¸åŒã€‚åœ¨ Obsidian å¼€æ”¾ API è¿›è¡Œæœç´¢ä¹‹å‰ï¼Œæš‚æ—¶åªèƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚æ‚¨å¯ä»¥åœ¨ä»£ç å—ä¸­ä½¿ç”¨ `debug: true` æ¥æŸ¥çœ‹æŸ¥è¯¢è¿”å›çš„ç»“æœã€‚

å°†æŸ¥è¯¢æ¸²æŸ“ä¸ºå­—ç¬¦ä¸²ï¼š

````markdown
```oql
name: "æ¯æ—¥ç¬”è®°"
query: "'100 Daily/"
template: "string"
format: "{name}: {count}"
```
````

æ˜¾ç¤ºè°ƒè¯•çª—å£ä»¥åˆ—å‡ºç»“æœï¼Œå¹¶å°†ç»“æœåŒ…è£…åœ¨æ ‡é¢˜ä¸­ï¼š

````markdown
```oql
name: "æ¯æ—¥ç¬”è®°"
query: "'100 Daily/"
template: "string"
format: "{name}: {count}"
debug: true
wrapper: h1
```
````

æ¸²æŸ“ `folder1/` ä¸­çš„ 10 ä¸ªéšæœºç¬”è®°åˆ—è¡¨ã€‚

````markdown
```oql
name: æ–‡ä»¶å¤¹1
query: "'folder1/"
template: "list" # æ¸²æŸ“ä¸ºå¸¦æœ‰é“¾æ¥çš„åˆ—è¡¨
sort: 'random' # ä»¥éšæœºé¡ºåºæ¸²æŸ“åˆ—è¡¨
limit: 10 # é™åˆ¶ä¸ºå‰10ä¸ª
```
````

ä»¥è‡ªå®šä¹‰æ ¼å¼æ¸²æŸ“ `folder1/` ä¸­æœ€ååˆ›å»ºçš„ 10 ä¸ªç¬”è®°åˆ—è¡¨ã€‚

````markdown
```oql
name: æ–‡ä»¶å¤¹1
query: "'folder1/"
template: "list" # æ¸²æŸ“ä¸ºå¸¦æœ‰é“¾æ¥çš„åˆ—è¡¨
format: "{created}: {title}"
sort: 'created'
limit: 10 # é™åˆ¶ä¸ºå‰10ä¸ª
```
````

ä»¥è¡¨æ ¼å½¢å¼æ˜¾ç¤º 5 ä¸ªæœ€æ—§çš„é¡¹ç›®ï¼ˆ`sort -created`ï¼‰ï¼Œå¹¶æ˜¾ç¤ºå®ƒä»¬çš„ä¿®æ”¹æ—¥æœŸï¼š

````markdown
```oql
name: æœ€æ—§çš„é¡¹ç›®
query: "'200 Projects/"
template: "table"
sort: '-created'
limit: 5
badge: false
fields: ['title', 'modified']
```
````

è®¡ç®—åŒ…å«ç‰¹å®šæ ‡ç­¾çš„ç¬”è®°æ•°é‡ï¼š

````markdown
```oql
name: 'æœ‰å¤šå°‘ç¬”è®°ä½¿ç”¨ #utrecht'
query: "'#utrecht"
template: "string"
format: "{name}: {count}"
badge: false
```
````

è¯·æŸ¥çœ‹ [Fuseçš„æ‰©å±•æœç´¢æ–‡æ¡£](https://fusejs.io/examples.html#extended-search) ä»¥äº†è§£å¦‚ä½•æŸ¥è¯¢æ‚¨è‡ªå·±çš„å­˜å‚¨åº“ã€‚**è¯­æ³•ä¸ Obsidian æœç´¢çš„å½“å‰æŸ¥è¯¢è¯­æ³•ä¸åŒ¹é…ï¼Œè¯·æ³¨æ„ï¼**

### å¤æ‚æŸ¥è¯¢

Fuse è¿˜æ”¯æŒæ›´å¤æ‚çš„æŸ¥è¯¢ï¼Œå› æ­¤æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºæŸ¥è¯¢ã€‚è™½ç„¶è¿™ç§æ–¹å¼ä¸å¤ªå®¹æ˜“ä¹¦å†™ï¼Œä½†å¯ä»¥æ›´åŠ å…·ä½“ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

````
```oql
name: 'notesæ–‡ä»¶å¤¹ä¸­æœ‰å¤šå°‘ä¸ªç¬”è®°'
query: 
    path: "'notes"
template: "string"
format: "{name}: {count}
```
````

### æœç´¢ç¬”è®°å†…å®¹

ä¹‹å‰çš„ç¤ºä¾‹ä¸»è¦é›†ä¸­åœ¨å…ƒæ•°æ®æœç´¢ä¸Šã€‚å½“ç„¶ï¼ŒOQL ä¹Ÿå¯ä»¥ç”¨æ¥æœç´¢ Obsidian ä¸­ç¬”è®°çš„å®é™…å†…å®¹ã€‚

ä»¥ä¸‹ç¤ºä¾‹å¯ä»¥å¸®åŠ©æ‚¨å…¥é—¨ï¼ˆæ„Ÿè°¢ [https://github.com/ewandel](ewandel)ï¼‰ï¼š

ç¤ºä¾‹ 1ï¼š

```` 
```oql
name: 'boolean OR search'
query: apple | pear
template: "string"
format: "{name}: {count}"
badge: true
debug: true
complete notation (longer, but more flexible):
```
````

ç¤ºä¾‹ 2ï¼š

```` 
```oql
name: 'OR combination list of results'
query: { $or: [{ "content": "'apple" }, { "content": "'pear" }] }
template: "list"
badge: true
debug: true
```
````

ç¤ºä¾‹ 3ï¼š

ä»…åœ¨ç¬”è®°â€œmy gardenâ€ä¸­æœç´¢ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦åŒ…å«â€œappleâ€å’Œâ€œpearâ€ã€‚æ³¨æ„åœ¨â€œmy gardenâ€å‰é¢çš„ `=`ï¼Œä»¥å¼ºåˆ¶è¿›è¡Œç²¾ç¡®åŒ¹é…ã€‚ä½¿ç”¨â€œ`'`â€åªéœ€è¦æ–‡æœ¬åŒ…å«è¯¥ç‰¹å®šå•è¯ã€‚ä¾‹å¦‚ï¼š[[apple]] çš„é“¾æ¥æˆ–â€œapple-treeâ€ä¹Ÿä¼šè¢«æ‰¾åˆ°ã€‚

```` 
```oql
name: 'Search in single file with AND'
query: { $and: [{ "title": ="my garden" }, {$and: [{ "content": "'apple" }, {"content": "'pear" }]}]}
template: "string"
badge: false
debug: true
includeMatches: false
format: "{count}"
```
````

ç¤ºä¾‹ 4ï¼š

```` 
```oql
name: 'check if note "my new garden" contains "fruit" AND ("tree" OR "bush")'
query: { $and: [{ "title": ="my new garden" }, { "content": "'fruit"}, {$or: [{ "content": "'tree" }, {"content": "'bush" }]}]}
template: "string"
badge: false
debug: true
includeMatches: false
format: "{count}"
```
````

è¿™ä¸ªæ’ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ

å®ƒä½¿ç”¨ [Fuse](https://fusejs.io/) æ„å»ºäº†ä¸€ä¸ªå¹¶è¡Œç´¢å¼•ï¼Œæ‚¨å¯ä»¥ç”¨æ¥æŸ¥è¯¢æ•°æ®ï¼

æˆ‘å¯ä»¥åœ¨æˆ‘çš„æ’ä»¶ä¸­ä½¿ç”¨ OQL æ’ä»¶å—ï¼Ÿ

æ˜¯çš„ï¼ç°åœ¨è¿™ä¸ªåŠŸèƒ½æ˜¯å¼€æ”¾çš„ä¸€æ®µæ—¶é—´ã€‚

è¦ä½¿ç”¨å®ƒï¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å®‰è£…äº†â€œobsidian-query-languageâ€æ’ä»¶ã€‚ä»¥ä¸‹ä»£ç åº”è¯¥åœ¨æ§åˆ¶å°ä¸­è¿”å›è¯¥æ’ä»¶ï¼š`this.app.plugins.plugins['obsidian-query-language']`ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœç´¢åŠŸèƒ½ï¼Œå…¶ä¸­æŸ¥è¯¢æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–éµå¾ª [Fuseæ¥å£](https://fusejs.io/api/query.html) çš„å¯¹è±¡ï¼š

```typescript
if ('obsidian-query-language' in this.app.plugins.plugins) {
    let query = "'testing" // æ‰€æœ‰å®Œå…¨åŒ¹é…å•è¯'testing'çš„ç¬”è®°ã€‚
    let searchResults = await this.app.plugins.plugins['obsidian-query-language'].search(query)
    // å¯¹æœç´¢ç»“æœè¿›è¡Œå¤„ç†
}
```

å¦‚æœ SearchIndex ä¸å¯ç”¨ï¼Œè¯¥æ’ä»¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚å¦‚æœæ‚¨çš„æ’ä»¶åœ¨ OQL æ’ä»¶ä¹‹å‰åŠ è½½ï¼Œå¯èƒ½ä¼šé‡åˆ°æ­¤é—®é¢˜ã€‚å› æ­¤ï¼Œæœ€å¥½æ•è·è¯¥é”™è¯¯å¹¶å‘ç”¨æˆ·æ˜¾ç¤ºä¸€æ¡æ¶ˆæ¯ğŸ––ã€‚å¦åˆ™ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªå¯èƒ½åŒ…å«ç»“æœçš„ Promiseï¼

## å¾…åŠäº‹é¡¹ / ç‰¹æ€§

- [x] å¯¹è¾“å‡ºè¿›è¡Œæ’åºï¼Ÿ
- [x] åœ¨è¡¨æ ¼è¾“å‡ºä¸­æ·»åŠ æ ‡ç­¾å­—æ®µã€‚
- [x] å…è®¸æ›´å¤æ‚çš„ [é€»è¾‘æŸ¥è¯¢è¿ç®—ç¬¦](https://fusejs.io/api/query.html)ã€‚
- [x] å°†æ‰€æœ‰è¾“å‡ºå‡çº§ä¸ºæ ¼å¼å­—ç¬¦ä¸²ã€‚
- [x] åœ¨æ’ä»¶ä¸Šå…¬å¼€ä¸€ä¸ª `.search(query)` å‡½æ•°ä¾›å…¶ä»–å¼€å‘è€…ä½¿ç”¨ã€‚
- [ ] æ·»åŠ ä¸€ä¸ªæ¨¡æ¿ `graph`ï¼Ÿ
- [ ] å…è®¸åœ¨ frontmatter ç‰¹å®šå­—æ®µä¸Šè¿›è¡ŒæŸ¥è¯¢ï¼Ÿ
- [ ] å¯ç”¨çš„åˆ›å»º/ä¿®æ”¹æ—¶é—´æˆ³ï¼Œæˆ‘ä»¬èƒ½å¦ä¹ŸæŸ¥è¯¢è¿™äº›æ—¶é—´æˆ³ï¼Ÿ
- [ ] å¤šä¸ªæŸ¥è¯¢ï¼Ÿï¼ˆç”± [Liam](https://github.com/liamcain/) æå‡ºçš„æƒ³æ³•ï¼‰
- [ ] åœ¨æ’ä»¶çš„è®¾ç½®é€‰é¡¹å¡ä¸­é…ç½® Fuse è®¾ç½®ï¼Ÿï¼ˆä¾‹å¦‚æ¨¡ç³ŠåŒ¹é…çš„çµæ•åº¦ï¼‰
- [ ] ä¸€æ—¦ Obsidian çš„æœç´¢ API å¯ç”¨ï¼Œè½¬æ¢ä¸ºä½¿ç”¨è¯¥ API è¿›è¡Œæœç´¢ã€‚



