---
uid: 2023080322240030
title: Obsidian æ’ä»¶ï¼šOmnisearch
tags: ['æœç´¢/æ’åº', 'æ•ˆç‡', 'obsidianæ’ä»¶', 'readme']
description: æä¾›æ›´å¼ºå¤§çš„æ™ºèƒ½æœç´¢ï¼Œå¯ä»¥æœç´¢ PDFæ–‡ä»¶å’Œå›¾åƒä¸­çš„æ–‡å­—å†…å®¹ã€‚
author: AI
type: readme
draft: false
editable: false
modified: 20230101000000
---

# Obsidian æ’ä»¶ï¼šOmnisearch

> [!Note] æ’ä»¶åç‰‡
> - æ’ä»¶åç§°ï¼šOmnisearch
> - æ’ä»¶ä½œè€…ï¼šSimon Cambier
> - æ’ä»¶è¯´æ˜ï¼šæä¾›æ›´å¼ºå¤§çš„æ™ºèƒ½æœç´¢ï¼Œå¯ä»¥æœç´¢ PDF æ–‡ä»¶å’Œå›¾åƒä¸­çš„æ–‡å­—å†…å®¹ã€‚
> - æ’ä»¶åˆ†ç±»ï¼š[' æœç´¢/æ’åº ', ' æ•ˆç‡ ', 'obsidian æ’ä»¶ ', 'readme']
> - é¡¹ç›®åœ°å€ï¼š[ç‚¹æˆ‘è®¿é—®](https://github.com/scambier/obsidian-omnisearch)
> - å›½å†…ä¸‹è½½åœ°å€ï¼š[ä¸‹è½½å®‰è£…](https://pkmer.cn/products/plugin/pluginMarket/?omnisearch)

## æ¦‚è¿°

æä¾›æ›´å¼ºå¤§çš„æ™ºèƒ½æœç´¢ï¼Œå¯ä»¥æœç´¢ PDF æ–‡ä»¶å’Œå›¾åƒä¸­çš„æ–‡å­—å†…å®¹ã€‚

![Omnisearch](https://cdn.pkmer.cn/covers/omnisearch.png!pkmer)

> [!tip] åŸæ–‡å‡ºå¤„
>
>ä¸‹é¢è‡ªè¿°æ–‡ä»¶çš„æ¥æºäº [Readme](https://ghproxy.net/https://raw.githubusercontent.com/scambier/obsidian-omnisearch/master/README.md)
>

---

## Readme(ç¿»è¯‘ï¼‰

ä¸‹é¢æ˜¯ [[omnisearch]] æ’ä»¶çš„è‡ªè¿°ç¿»è¯‘

# Obsidian çš„ Omnisearch

[![èµåŠ©æˆ‘](https://img.shields.io/badge/%E2%9D%A4%20å–œæ¬¢è¿™ä¸ªæ’ä»¶å—ï¼Ÿ-èµåŠ©æˆ‘ï¼-ff69b4)](https://github.com/sponsors/scambier)
![Obsidianæ’ä»¶](https://img.shields.io/endpoint?url=https%3A%2F%2Fscambier.xyz%2Fobsidian-endpoints%2Fomnisearch.json)

![GitHubå‘å¸ƒï¼ˆæŒ‰æ—¥æœŸå’Œæ–‡ä»¶ï¼‰](https://img.shields.io/github/downloads/scambier/obsidian-omnisearch/latest/main.js)
![GitHubå‘å¸ƒï¼ˆåŒ…æ‹¬é¢„å‘å¸ƒï¼‰](https://img.shields.io/github/v/release/scambier/obsidian-omnisearch)

![GitHubå‘å¸ƒï¼ˆåŒ…æ‹¬é¢„å‘å¸ƒï¼‰](https://img.shields.io/github/v/release/scambier/obsidian-omnisearch?include_prereleases&label=BRAT%20beta)

> **Omnisearch**æ˜¯ä¸€ä¸ªâ€œå³åˆ»ç”Ÿæ•ˆâ€çš„æœç´¢å¼•æ“ã€‚ç”±äºå…¶æ™ºèƒ½åŠ æƒç®—æ³•ï¼Œå®ƒæ€»æ˜¯ç«‹å³æ˜¾ç¤ºæœ€ç›¸å…³çš„ç»“æœã€‚

åœ¨å†…éƒ¨ï¼Œå®ƒä½¿ç”¨äº†ä¼˜ç§€çš„ [MiniSearch](https://github.com/lucaong/minisearch) åº“ã€‚

![](https://raw.githubusercontent.com/scambier/obsidian-omnisearch/master/images/omnisearch.gif)

## ç‰¹ç‚¹

> Omnisearch çš„é¦–è¦ç›®æ ‡æ˜¯å³æ—¶â€œå®šä½â€æ–‡ä»¶ã€‚æ‚¨å¯ä»¥å°†å…¶è§†ä¸ºåŠŸèƒ½å¼ºå¤§çš„â€œå¿«é€Ÿåˆ‡æ¢å™¨â€ã€‚

- æ¯”ä»¥å¾€æ›´å¿«åœ°æ‰¾åˆ°æ‚¨çš„**ğŸ“ç¬”è®°ã€ğŸ“„PDF å’ŒğŸ–¼å›¾ç‰‡**
  - é€šè¿‡ [Text Extractor](https://github.com/scambier/obsidian-text-extractor) å¯ç”¨äºå›¾åƒå’Œ PDF ç´¢å¼•
- ä½¿ç”¨ [BM25ç®—æ³•](https://github.com/lucaong/minisearch/issues/129#issuecomment-1046257399) è¿›è¡Œè‡ªåŠ¨æ–‡æ¡£è¯„åˆ†
  - æ–‡æ¡£ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§å–å†³äºæŸ¥è¯¢è¯åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°ã€æ–‡ä»¶åå’Œæ ‡é¢˜
- é”®ç›˜ä¼˜å…ˆï¼šæ‚¨æ°¸è¿œä¸å¿…ä½¿ç”¨é¼ æ ‡
- ä¸â€œå¿«é€Ÿåˆ‡æ¢å™¨â€æ ¸å¿ƒæ’ä»¶ç±»ä¼¼çš„å·¥ä½œæµç¨‹
- æŠ—æ‰“å­—é”™è¯¯
- åœ¨ Vault å’Œ In-file æœç´¢ä¹‹é—´åˆ‡æ¢ï¼Œä»¥ä¾¿åœ¨å•ä¸ªç¬”è®°ä¸­å¿«é€Ÿæµè§ˆå¤šä¸ªç»“æœ
- æ”¯æŒâ€œç”¨å¼•å·æ‹¬èµ·æ¥çš„è¡¨è¾¾å¼â€å’Œâ€œ- æ’é™¤â€
- ç›´æ¥ä»æœç´¢ç»“æœä¸­æ’å…¥ `[[é“¾æ¥]]`
- æ”¯æŒ Vim å¯¼èˆªé”®

**æ³¨æ„ï¼š**å¯¹äºä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ç­‰çš„æ”¯æŒå–å†³äº [æ­¤é™„åŠ æ’ä»¶](https://github.com/aidenlx/cm-chs-patch)ã€‚è¯·é˜…è¯»å…¶æ–‡æ¡£ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚

## å®‰è£…

- Omnisearch å¯åœ¨ [å®˜æ–¹ç¤¾åŒºæ’ä»¶ä»“åº“](https://obsidian.md/plugins?search=Omnisearch) ä¸Šè·å–ã€‚
- Beta ç‰ˆæœ¬å¯ä»¥é€šè¿‡ [BRAT](https://github.com/TfTHacker/obsidian42-brat) å®‰è£…ã€‚**è¯·æ³¨æ„ï¼Œè¿™äº›ç‰ˆæœ¬å¯èƒ½å­˜åœ¨é”™è¯¯å¹¶å¯èƒ½å¯¼è‡´é—®é¢˜ã€‚**

æ‚¨å¯ä»¥æŸ¥çœ‹ [CHANGELOG](./CHANGELOG.md) ä»¥è·å–æœ‰å…³ä¸åŒç‰ˆæœ¬çš„æ›´å¤šä¿¡æ¯ã€‚

ç”¨æ³•

Omnisearch å¯ä»¥åœ¨ä¸¤ä¸ªä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ï¼š

### Vault Search

Omnisearch çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œé€šè¿‡å‘½ä»¤é¢æ¿ "**_Omnisearch: Vault search_**" å¯ä»¥è®¿é—®ã€‚è¿™ä¸ªæ¨¡æ€æœç´¢ä½ çš„å­˜å‚¨åº“å¹¶è¿”å›æœ€ç›¸å…³çš„ç¬”è®°ã€‚è¿™å°±æ˜¯ä½ éœ€è¦çš„å…¨éƒ¨æ¥ _ æ‰¾åˆ° _ ä¸€æ¡ç¬”è®°ã€‚

å¦‚æœä½ æƒ³åˆ—å‡ºå•ä¸ªç¬”è®°çš„æ‰€æœ‰æœç´¢åŒ¹é…é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ `tab` é”®æ‰“å¼€æ–‡ä»¶å†…æœç´¢ã€‚

### åœ¨æ–‡ä»¶ä¸­æœç´¢

ä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤é¢æ¿ "**_Omnisearch: In-file search_**" è¿›è¡Œè®¿é—®ã€‚è¯¥æ¨¡æ€æœç´¢æ´»åŠ¨ç¬”è®°çš„å†…å®¹å¹¶åˆ—å‡ºåŒ¹é…çš„ç»“æœã€‚åªéœ€æŒ‰ä¸‹å›è½¦é”®å³å¯è‡ªåŠ¨æ»šåŠ¨åˆ°æ­£ç¡®çš„ä½ç½®ã€‚

URL Scheme & å…¬å…± API

æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ scheme æ‰“å¼€ Omnisearchï¼š`obsidian://omnisearch?query=foo bar`

----

å¯¹äºæ’ä»¶å¼€å‘è€…å’Œ Dataview ç”¨æˆ·ï¼ŒOmnisearch ä¹Ÿå¯ä»¥é€šè¿‡å…¨å±€å¯¹è±¡ `omnisearch` (`window.omnisearch`) è¿›è¡Œè®¿é—®ã€‚

> æ­¤ API æ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œ`ResultNote` æ¥å£å¯èƒ½ä¼šåœ¨å°†æ¥å‘ç”Ÿå˜åŒ–ã€‚`search()` å‡½æ•°æœ€å¤šè¿”å› 50 ä¸ªç»“æœã€‚

```ts
// API:
{
  // è¿”å›ä¸€ä¸ªåŒ…å«ä¸ Vault æ¨¡æ€çª—å£ç›¸åŒç»“æœçš„ Promise
  search: (query: string) => Promise<ResultNoteApi[]>
}

type ResultNoteApi = {
  score: number
  path: string
  basename: string
  foundWords: string[]
  matches: SearchMatchApi[]
}

type SearchMatchApi = {
  match: string
  offset: number
}
```

### Dataview é›†æˆ

æ‚¨å¯ä»¥ç›´æ¥åœ¨ [Dataview](https://blacksmithgu.github.io/obsidian-dataview/) æ’ä»¶ä¸­ä½¿ç”¨ Omnisearch APIã€‚

~~~js
```dataviewjs
const results = await omnisearch.search('your query')
const arr = dv.array(results).sort(r => r.score, 'desc')
dv.table(['æ–‡ä»¶', 'å¾—åˆ†'], arr.map(o => [dv.fileLink(o.path), Math.round(o.score)]))
```
~~~

## CSS è‡ªå®šä¹‰

æœ‰å‡ ä¸ª CSS ç±»å¯ä»¥ç”¨æ¥è‡ªå®šä¹‰ Omnisearch çš„å¤–è§‚ã€‚

```css
.omnisearch-modal
.omnisearch-result
.omnisearch-result__title
.omnisearch-result__counter
.omnisearch-result__body
.omnisearch-highlight
.omnisearch-input-container
.omnisearch-input-field
```

æ›´å¤šä¿¡æ¯è¯·å‚è§ [styles.css](./assets/styles.css)ã€‚

é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

**Omnisearch ä½¿ Obsidian åœ¨å¯åŠ¨æ—¶å˜å¾—ç¼“æ…¢/å†»ç»“ã€‚**

- è™½ç„¶ Omnisearch å°½åŠ›åœ¨åå°å¹³ç¨³è¿è¡Œï¼Œä½†æ˜¯è¾ƒå¤§çš„å­˜å‚¨åº“å’Œæ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´ Obsidian åœ¨ç´¢å¼•è¿‡ç¨‹ä¸­å‡ºç°å¡é¡¿ã€‚
- å¦‚æœæ‚¨æœ‰æ•°åƒä¸ªæ–‡ä»¶ï¼Œå½“ Omnisearch ç¼“å­˜åŠ è½½åˆ°å†…å­˜ä¸­æ—¶ï¼ŒObsidian åœ¨å¯åŠ¨æ—¶å¯èƒ½ä¼šå†»ç»“å‡ ç§’é’Ÿã€‚

**Omnisearch ä¼¼ä¹ä½¿ Obsidian å˜æ…¢ã€‚**

- ä¸€æ—¦ Obsidian åœ¨å¯åŠ¨æ—¶å¯¹æ‚¨çš„æ–‡ä»¶è¿›è¡Œäº†ç´¢å¼•ï¼Œå½“å…¶æ¨¡æ€å…³é—­æ—¶ï¼Œå®ƒä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œã€‚åªæœ‰å½“æ‚¨å†æ¬¡æ‰“å¼€æ¨¡æ€æ—¶ï¼Œæ‚¨çš„æ›´æ”¹æ‰ä¼šè¢«ç´¢å¼•ã€‚å¦‚æœæ‚¨åœ¨ä½¿ç”¨ Obsidian æ—¶é‡åˆ°å‡é€Ÿï¼Œé‚£ä¹ˆ Omnisearch ä¸å¤ªå¯èƒ½æ˜¯åŸå› ã€‚
- ä½†æ˜¯ï¼Œå½“é¦–æ¬¡ä¸º PDF å’Œå›¾åƒè¿›è¡Œç´¢å¼•æ—¶ï¼ŒText Extractor å¯èƒ½ä¼šä½¿ Obsidian å˜æ…¢ã€‚å¦‚æœæ‚¨ä¸éœ€è¦è¿™äº›åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ’ä»¶è®¾ç½®ä¸­ç¦ç”¨å®ƒä»¬ã€‚

**Omnisearch åœ¨å¯¹æˆ‘çš„ PDF å’Œå›¾åƒè¿›è¡Œç´¢å¼•æ—¶é€Ÿåº¦å¾ˆæ…¢**

- å½“ Text Extractor é¦–æ¬¡è¯»å–è¿™äº›æ–‡ä»¶æ—¶ï¼Œæå–å…¶æ–‡æœ¬å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ã€‚ç„¶åå°†ç»“æœç¼“å­˜åˆ°æ–‡æœ¬å¯åŠ¨ä¸­ã€‚

**Omnisearch ç»™å‡ºäº†ä¸ä¸€è‡´/æ— æ•ˆçš„ç»“æœï¼Œåœ¨å¼€å‘è€…æ§åˆ¶å°ä¸­å‡ºç°é”™è¯¯**

- é‡æ–°å¯åŠ¨ Obsidian ä»¥å¼ºåˆ¶é‡æ–°ç´¢å¼• Omnisearchã€‚
- ç¼“å­˜å¯èƒ½å·²æŸåï¼›æ‚¨å¯ä»¥åœ¨è®¾ç½®é¡µé¢åº•éƒ¨æ¸…é™¤ç¼“å­˜ï¼Œç„¶åé‡æ–°å¯åŠ¨ Obsidianã€‚

**æŸ¥è¯¢åº”è¿”å›ä¸€ä¸ªæœªæ˜¾ç¤ºçš„ç»“æœã€‚**

- å¦‚æœé€‚ç”¨ï¼Œè¯·ç¡®ä¿å¯ç”¨äº†â€œå¿½ç•¥å˜éŸ³ç¬¦å·â€ã€‚
- å¦‚æœæ‚¨å·²å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œè¯·å°†æƒé‡é‡ç½®ä¸ºå…¶åŸå§‹å€¼ã€‚
- é‡æ–°ç¼–å†™æŸ¥è¯¢å¹¶é¿å…ä½¿ç”¨æ•°å­—å’Œå¸¸è§è¯è¯­ã€‚

**æˆ‘ä»ç„¶é‡åˆ°é—®é¢˜**

æ‚¨å¯ä»¥åœ¨ [æ­¤å¤„](https://github.com/scambier/obsidian-omnisearch/issues) è¯¦ç»†æè¿°æ‚¨çš„é—®é¢˜ã€‚

## è®¸å¯è¯

Omnisearch åœ¨ [GPL-3](https://tldrlegal.com/license/gnu-general-public-license-v3-(gpl-3)) ä¸‹è·å¾—è®¸å¯ã€‚

æ„Ÿè°¢æ‰€æœ‰é€šè¿‡ [Ko-Fi](https://ko-fi.com/scambier) æˆ– [GithubèµåŠ©å•†](https://github.com/sponsors/scambier) æèµ çš„äººä»¬â¤

![JetBrains Logo (Main) logo](https://resources.jetbrains.com/storage/products/company/brand/logos/jb_beam.svg)
