---
uid: 20231014173618
title: è‡ªå®šä¹‰ Excalidraw è„šæœ¬ - å»ºç«‹åº“å¤– Eagle ç´ æåº“çš„è¿æ¥
tags: [Eagle, Excalidraw, å·¥ä½œæµ, å·¥ä½œæµæ­å»º]
description: è‡ªå®šä¹‰ Excalidraw è„šæœ¬ - å»ºç«‹åº“å¤– Eagle ç´ æåº“çš„è¿æ¥
author: ç†ŠçŒ«åˆ«ç†¬å¤œ
type: other
draft: false
editable: false
modified: 20231107231913
---

# è‡ªå®šä¹‰ Excalidraw è„šæœ¬ - å»ºç«‹åº“å¤– Eagle ç´ æåº“çš„è¿æ¥

![](https://cdn.pkmer.cn/images/202310202158767.png!pkmer)

> [!caution]+ æ¸©é¦¨æé†’
> è¿™ä¸ªè„šæœ¬æ˜¯ä½œç”¨åœ¨ Obsidian ç¬”è®°åº“å¤–çš„ Eagle åº“ï¼ŒEagle åœ¨å¯¼å…¥æ–‡ä»¶æ—¶ä¼šåˆ›å»ºå¾ˆå¤šå…¶ä»–æ•°æ®æ–‡ä»¶ï¼Œå¹¶ä¸é€‚åº”äºåœ¨ Obsidian ä¸­å»ºç«‹ï¼Œå¯ä»¥å°è¯•ç”¨ Billfish ç®¡ç† Obsidian å†…éƒ¨çš„å›¾ç‰‡ã€‚
>
> è¿™è„šæœ¬è”åŠ¨ Obsidian ç¬”è®°å¤–çš„å¥½å¤„å°±æ˜¯å½“ä½ åˆ é™¤ Eagle åº“ä¸­ç´ ææ—¶ (ç´ æåº“å®šæœŸæ•´ç†)ï¼ŒObsidian çš„å†…éƒ¨ç¬”è®°å¹¶ä¸å—å½±å“ï¼Œè€Œä¸” Eagle ä½œä¸ºç´ æç®¡ç†å™¨éå¸¸ä¼˜ç§€ï¼Œå¯ä»¥å¿«é€Ÿé¢„è§ˆå’Œç¼–è¾‘å›¾ç‰‡ï¼Œç®¡ç†å¾ˆå¤šç±»å‹çš„æ–‡æ¡£ï¼ŒåŒ…æ‹¬ç”¨æµè§ˆå™¨æ‹“å±•æ’ä»¶å‰ªè—ç½‘é¡µï¼Œæ‰¹é‡æ”¶é›†ç½‘é¡µç”»æ¿æˆ–è€…å›¾ç‰‡ï¼Œä»¥å›¾æœå›¾ï¼Œç”¨æ ‡ç­¾å’Œæ ‡æ˜Ÿç®¡ç†æ–‡ä»¶ç­‰ç­‰ï¼Œå…·ä½“åŠŸèƒ½å¯ä»¥çœ‹çœ‹ç›¸å…³ä»‹ç»ã€‚

è¿™ä¸ªè„šæœ¬åœ¨ [ç¡¬æ ¸å·¥ä½œæµï¼šå®ç°ä»¥å›¾æœå›¾]( https://pkmer.cn/show/20230925114907 ) ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œè¿™é‡Œå°±å•ç‹¬æå‡ºæ¥ï¼Œè„šæœ¬çš„åˆå§‹ç›®çš„æ˜¯ä¸ºäº†å»ºç«‹å¯¹ PDF çš„å›¾ç‰‡åšç¬”è®°æ—¶ï¼ŒåŒæ—¶ä¿ç•™å›¾ç‰‡çš„å›é“¾æ¥å®šä½åˆ°å…·ä½“çš„ PDF æ‰€åœ¨çš„é¡µé¢ï¼Œå…¶ä¸­æ¶‰åŠåˆ°äº†ä¸€äº› PDF æå–å›¾ç‰‡çš„æ“ä½œã€‚

## åŠŸèƒ½æ¼”ç¤º

è¯¥è„šæœ¬çš„ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡æ‹–æ‹½å°† Eagle ä¸­ç´ ææ‹–å…¥ Excalidraw ç”»æ¿ä¸­æ—¶ï¼Œä¼šè‡ªåŠ¨å¤åˆ¶ç´ æåˆ° Obsidian ç¬”è®°åº“ä¸­ï¼ŒåŒæ—¶è¯»å– Eagle ç´ ææ–‡ä»¶ä¸‹çš„ metadata.json æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œå°†å­˜å‚¨çš„ url è¿æ¥éšç€ç´ æåµŒå…¥åˆ° Excalidraw ç”»æ¿ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥è®©å­˜æ”¾çš„å›¾ç‰‡ã€HTMLã€PDFã€PPT ç­‰ç´ æåµŒå…¥åˆ° Excalidraw ç”»æ¿åŒæ—¶å¯ä»¥æ‰“å¼€å¯¹åº”çš„å¤–éƒ¨é“¾æ¥ã€‚

<iframe src="https://player.bilibili.com/player.html?aid=234651352&bvid=BV14841167do&cid=1232824646&page=1&autoplay=false" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width="80%" height="500"> </iframe>

### é’ˆå¯¹ Office å’Œ PDF çš„åµŒå…¥

> [!tip]+ é’ˆå¯¹ Office ä¸‰ä»¶å¥—å’Œ PDF çš„ä¼˜åŒ–
> å¦‚æœåµŒå…¥çš„æ˜¯ Office ä¸‰ä»¶å¥—æˆ–è€… PDF çš„è¯ï¼Œä¼šå‡ºç°å¼¹çª—é€‰æ‹©æ’å…¥ç¼©ç•¥å›¾è¿˜æ˜¯é“¾æ¥ï¼šç¡®å®šåˆ™æ’å…¥ç¼©ç•¥å›¾é™„åŠ æ–‡ä»¶å›é“¾ï¼Œå–æ¶ˆåˆ™åªæ’å…¥è¿æ¥ï¼š
> ![](https://cdn.pkmer.cn/images/202310202201169.png!pkmer)

### é€šè¿‡å›¾ç‰‡è·³è½¬ Eagle åŸæ–‡ä»¶

> [!tip]+ Eagle çš„å¤–éƒ¨å›é“¾
> Eagle ä¹Ÿå­˜åœ¨å¤–éƒ¨é“¾æ¥ï¼Œé»˜è®¤ä¸º `eagle://item/{æ–‡ä»¶å}`ï¼Œæ–‡ä»¶ä¼šåœ¨ Eagle ä¸­æ‰“å¼€ã€‚
> æ•…å½“ä½ é€‰æ‹©ä¸€ä¸ªå›¾ç‰‡æ—¶ï¼Œå†æ¬¡å•å‡»è¿™ä¸ªè„šæœ¬ï¼Œå°±ä¼šåœ¨ Eagle ä¸­æ‰“å¼€è¿™ä¸ªå›¾ç‰‡ã€‚
> ![](https://cdn.pkmer.cn/images/202310202201951.gif)

## OpenSelectImage è„šæœ¬

> [!tip]+ OpenSelectImage
> é»˜è®¤è½¯ä»¶æ‰“å¼€ç”»æ¿ä¸­é€‰ä¸­çš„å›¾ç‰‡ï¼Œé€‚ç”¨äºå½“æ‚¨æƒ³ç”¨é»˜è®¤è½¯ä»¶ç¼–è¾‘ç¬”è®°ç”»æ¿ä¸­çš„å›¾ç‰‡æ—¶ï¼Œé‡‡ç”¨çš„ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚
> ![](https://cdn.pkmer.cn/images/202310202201572.png!pkmer)

![](https://cdn.pkmer.cn/images/202310202201415.gif)

```JavaScript
await ea.addElementsToView(); //to ensure all images are saved into the file
const { exec } = require('child_process');

const img = ea.getViewSelectedElements().filter(el => el.type === "image");
if (img.length === 0) {
  new Notice("No image is selected");
  return;
}

for (i of img) {
  const currentPath = ea.plugin.filesMaster.get(i.fileId).path;
  const file = app.vault.getAbstractFileByPath(currentPath);
  if (!file) {
    new Notice("Can't find file: " + currentPath);
    continue;
  }
  const pathNoExtension = file.path.substring(0, file.path.length - file.extension.length - 1);
  let fileName = file.path;
  let fileBasePath = file.vault.adapter.basePath;
  let filePath = `${fileBasePath}/${fileName}`

  // ä½¿ç”¨é»˜è®¤åº”ç”¨æ‰“å¼€æ–‡ä»¶
  exec(`start "" "${filePath}"`, (error, stdout, stderr) => {
    if (error) {
      console.error(`æ‰“å¼€æ–‡ä»¶æ—¶å‡ºé”™: ${error.message}`);
      return;
    }
    if (stderr) {
      console.error(`æ‰“å¼€æ–‡ä»¶æ—¶å‡ºé”™: ${stderr}`);
      return;
    }
    console.log(`æ–‡ä»¶å·²æˆåŠŸæ‰“å¼€`);
  });
}
```

### ä¿å­˜ä¸º md æ–‡ä»¶ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶å¤¹

ä¿®æ”¹å®Œè·¯å¾„åå°†ä¸‹é¢ä»£ç ä¿å­˜ä¸º md æ–‡ä»¶ï¼Œä¿®æ”¹æ”¾å…¥ Excalidraw æŒ‡å®šçš„ Scripts çš„æ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ Excalidraw çš„ç”»æ¿ä¸­çš„å·¥å…·é¢æ¿ä¸­å°±ä¼šå‡ºç°ä¸€ä¸ªé½¿è½®æŒ‰é’®ï¼Œéœ€è¦æ—¶ç‚¹å‡»è¿è¡Œå°±å¯ä»¥äº†ã€‚

![](https://cdn.pkmer.cn/images/202310202201799.png!pkmer)

## EagleToExcalidraw è„šæœ¬

åŒæ ·éœ€è¦ä¿å­˜ä¸º md æ–‡ä»¶ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶å¤¹

> [!caution]+ éœ€è¦ä¿®æ”¹çš„è·¯å¾„
> ![Pasted image 20231029203630](https://cdn.pkmer.cn/images/Pasted%20image%2020231029203630.png!pkmer)
> - ç¬¬ä¸€æ¬¡å®‰è£…æ”¹è„šæœ¬æ—¶ï¼Œå•å‡»è¿è¡Œè„šæœ¬ä¸€ä¸‹ï¼Œç„¶ååœ¨ Excalidraw æ’ä»¶è®¾ç½®ä¸­ä¼šå‡ºç°è¿™ä¸ªé€‰é¡¹
> - ä¿®æ”¹ä¸º Obsidian ä¸­å­˜æ”¾ç´ æçš„è·¯å¾„ (å·²åˆ›å»ºçš„è·¯å¾„)
> 	- æ³¨æ„ä½¿ç”¨ `/` æ¥è½¬ä¹‰è·¯å¾„ï¼Œé‡‡ç”¨ç›¸å¯¹è·¯å¾„ã€‚

è¯¥è„šæœ¬å¯èƒ½å¹¶ä¸é€‚åº”æ¯ä¸ªäººçš„ä¹ æƒ¯ï¼Œè¿™é‡Œåªä¾›å‚è€ƒå€Ÿé‰´ï¼Œè¯·å¤§å®¶æ ¹æ®è‡ªå·±éœ€æ±‚æ¥é€‚å½“ä¿®æ”¹ä»£ç ã€‚

```javascript
let settings = ea.getScriptSettings();
//set default values on first run
if (!settings["Eagle Images Path"]) {
    settings = {
        "Eagle Images Path": {
            value: "Y-å›¾å½¢æ–‡ä»¶å­˜å‚¨/EagleImages",
            description: "Obsidianåº“å†…å­˜æ”¾Eagleçš„å›¾ç‰‡çš„ç›¸å¯¹è·¯å¾„ï¼Œæ¯”å¦‚ï¼šY-å›¾å½¢æ–‡ä»¶å­˜å‚¨/EagleImages"
        }
    };
    ea.setScriptSettings(settings);
}

const path = require('path');
const fs = require("fs");
let api = ea.getExcalidrawAPI();
let el = ea.targetView.containerEl.querySelectorAll(".excalidraw-wrapper")[0];

// è·å–åº“çš„åŸºæœ¬è·¯å¾„
const basePath = (app.vault.adapter).getBasePath();
// è®¾ç½®ç›¸å¯¹è·¯å¾„
const relativePath = settings["Eagle Images Path"].value;

// å¯¹äºé€‰ä¸­çš„é¡¹ç›®ï¼Œåˆ™é€šè¿‡æ–‡ä»¶åæ¥åˆ›å»ºEagleçš„å›é“¾å¹¶æ‰“å¼€

let selectedEls = ea.getViewSelectedElements()

for (selectedEl of selectedEls) {
    let embeddedFile = ea.targetView.excalidrawData.getFile(selectedEl.fileId);
    if (!embeddedFile) {
        new Notice("Can't find file: " + selectedEl.fileId);
        continue;
    }
    let abstractPath = path.join(embeddedFile.file.vault.adapter.basePath, embeddedFile.file.path);
    const eagle_id = path.basename(abstractPath, path.extname(abstractPath));
    let EagleLink = `eagle://item/${eagle_id}`;
    // æ‰“å¼€é“¾æ¥
    window.open(EagleLink);
}

new Notice("EagleToExcalidrawè„šæœ¬å·²å¯åŠ¨ï¼");
// å¯¹äºä»Eagleæ‹–æ‹½è¿‡æ¥çš„æ–‡ä»¶ï¼Œä»¥Eagleæ–‡ä»¶å¤¹åå‘½åï¼Œæ ¹æ®åç¼€åæ¥åˆ›å»ºä¸åŒçš„æ‹–æ‹½å½¢å¼
el.ondrop = async function (event) {
    console.log("ondrop");
    event.preventDefault();
    if (event.dataTransfer.types.includes("Files")) {
        console.log("æ–‡ä»¶ç±»å‹åˆ¤æ–­");
        for (let file of event.dataTransfer.files) {
            let directoryPath = file.path;
            console.log(directoryPath);
            if (directoryPath) {
                console.log("è·å–è·¯å¾„");
                // æ¸…ç©ºæ’å…¥çš„ç¯å¢ƒå˜é‡
                event.stopPropagation();
                ea.clear();
                ea.style.strokeStyle = "solid";
                ea.style.backgroundColor = "#ffec99";
                ea.style.fillStyle = 'solid';
                ea.style.roughness = 0;
                // ea.style.roundness = { type: 3 };
                ea.style.strokeWidth = 1;
                ea.style.fontFamily = 4;
                ea.style.fontSize = 20;

                // åˆ¤æ–­æ˜¯å¦ä¸ºEagleæ–‡ä»¶ï¼Œä¸æ˜¯è¿™ä¸æ‰§è¡Œ
                let folderPath = path.dirname(directoryPath).split("\\").pop();
                console.log(folderPath)
                if (!folderPath.match(".info")) {
                    console.log("ä¸ä¸ºEagleæ–‡ä»¶å¤¹æ–‡ä»¶");
                    continue;
                }
                console.log("ä¸ºEagleæ–‡ä»¶å¤¹æ–‡ä»¶");                

                let file_name = path.basename(directoryPath);
                if (folderPath && file_name) {
                    eagle_id = folderPath.replace('.info', '');
                    console.log(eagle_id)
                    console.log(`folder: ${folderPath};file_name:${file_name};eagle_id:${eagle_id}`);                   

                    // è·å–åŸæ–‡ä»¶åï¼Œä¸å¸¦åç¼€
                    let insertFilename = file_name.split(".").slice(0, -1).join(".");

                    // è·å–æ–‡ä»¶ååç¼€
                    const fileExtension = file_name.split('.').pop();

                    // å°†å›¾ç‰‡æ–‡ä»¶ç§»åŠ¨åˆ°æŒ‡å®šæ–‡ä»¶å¤¹
                    let sourcePath = directoryPath;

                    // ğŸ“Œå®šä¹‰é™„ä»¶ä¿å­˜çš„åœ°å€
                    var destinationName = `${eagle_id}.${fileExtension}`;
                    let destinationPath = `${basePath}/${relativePath}/${destinationName}`;
                    console.log(destinationPath)
                    // è¯»å–metadata.jsonæ–‡ä»¶
                    let Eaglefolder = path.dirname(directoryPath);
                    const metadataPath = `${Eaglefolder}\\metadata.json`; // æ›¿æ¢ä¸ºå®é™…çš„æ–‡ä»¶è·¯å¾„
                    // ç¼©ç•¥å›¾çš„è·¯å¾„
                    let ThumbnailImage = `${Eaglefolder}\\${insertFilename}_thumbnail.png`;

                    fs.copyFileSync(sourcePath, destinationPath);
                    await new Promise((resolve) => setTimeout(resolve, 300)); // æš‚åœä¸€ä¼šå„¿

                    // è®©é»˜è®¤æ’å…¥æ–‡æœ¬ä¸ºæ–‡ä»¶å
                    let insert_txt = file_name;

                    // new Notice("æ’å…¥Eagleç´ æï¼š" + file_name);

                    const metadataContent = fs.readFileSync(metadataPath, 'utf8');
                    // è§£æä¸ºJSONå¯¹è±¡
                    const metadata = JSON.parse(metadataContent);

                    // è®¾ç½®ä¸åŒæ–‡ä»¶ç±»å‹çš„å¯¼å…¥æ–¹å¼ea.addTextä¸ºæ–‡æœ¬ã€ea.addImageä¸ºå›¾ç‰‡
                    if (
                        //   å¯¹ç½‘é¡µç»Ÿä¸€ç”¨å†…éƒ¨é“¾æ¥çš„å½¢å¼
                        file_name.toLowerCase().endsWith(".html") ||
                        file_name.toLowerCase().endsWith(".mhtml") ||
                        file_name.toLowerCase().endsWith(".htm")
                    ) {
                        let id = await ea.addText(0, 0, `[[${destinationName}|${insert_txt}]]`, { width: 300, box: true, wrapAt: 100, textAlign: "center", textVerticalAlign: "middle", box: "box" });

                        await ea.addElementsToView(true, false, false);

                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }

                    } else if (
                        //   å¯¹å›¾ç‰‡ç»Ÿä¸€ç”¨å¯¼å…¥å›¾ç‰‡åé™„åŠ é“¾æ¥çš„å½¢å¼
                        file_name.toLowerCase().endsWith(".png") ||
                        file_name.toLowerCase().endsWith(".jpg") ||
                        file_name.toLowerCase().endsWith(".jpeg") ||
                        file_name.toLowerCase().endsWith(".icon") ||
                        file_name.toLowerCase().endsWith(".svg")
                    ) {
                        let id = await ea.addImage(0, 0, destinationName);
                        let el = ea.getElement(id);

                        if (metadata.url) {
                            // å°†el.linkçš„å€¼è®¾ç½®ä¸ºmetadata.jsonä¸­çš„url
                            el.link = metadata.url;
                        } else {
                            // å°†el.linkçš„å€¼è®¾ç½®ä¸ºEagleçš„å›é“¾
                            el.link = ``;
                        }

                        await ea.addElementsToView(true, false, false);

                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }

                    } else if (file_name.toLowerCase().endsWith(".url")) {
                        // å¯¹urlæ–‡ä»¶é‡‡ç”¨æ–‡æœ¬åŠ å…¥jsonçš„è¿æ¥å½¢å¼
                        link = metadata.url;
                        let id = await ea.addText(0, 0, `ğŸŒ[${insert_txt.replace(".url", "")}](${link})`, { width: 400, box: true, wrapAt: 100, textAlign: "center", textVerticalAlign: "middle", box: "box" });

                        let el = ea.getElement(id);
                        // å°†el.linkçš„å€¼è®¾ç½®ä¸ºEagleçš„å›é“¾
                        el.link = `eagle://item/${eagle_id}`;
                        await ea.addElementsToView(true, false, false);
                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }
                    } else if (
                        //   é’ˆå¯¹Officeä¸‰ä»¶å¥—
                        file_name.toLowerCase().endsWith(".pptx") ||
                        file_name.toLowerCase().endsWith(".ppt") ||
                        file_name.toLowerCase().endsWith(".xlsx") ||
                        file_name.toLowerCase().endsWith(".xls") ||
                        file_name.toLowerCase().endsWith(".docx") ||
                        file_name.toLowerCase().endsWith(".doc") ||
                        file_name.toLowerCase().endsWith(".xmind") ||
                        file_name.toLowerCase().endsWith(".pdf")
                    ) {
                        let InsertPDFImage = confirm("æ˜¯å¦æ’å…¥é™„ä»¶ç¼©ç•¥å›¾ï¼Ÿ");

                        if (InsertPDFImage) {
                            let destinationPath = `${basePath}/${relativePath}/${eagle_id}.png`;
                            fs.copyFileSync(ThumbnailImage, destinationPath)
                            await new Promise((resolve) => setTimeout(resolve, 200)); // æš‚åœä¸€ä¼šå„¿
                            var id = await ea.addImage(0, 0, `${eagle_id}.png`);

                        } else {
                            var id = await ea.addText(0, 0, `[[${insert_txt}]]`, { width: 400, box: true, wrapAt: 100, textAlign: "center", textVerticalAlign: "middle", box: "box" });
                        }


                        let el = ea.getElement(id);
                        el.link = `[[${destinationName}]]`;

                        await ea.addElementsToView(true, false, false);
                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }

                    } else if (
                        //   å¯¹gifã€mp4ç­‰åŠ¨æ€è¿›è¡Œè®¾ç½®(å¯æ ¹æ®éœ€è¦çš„æ ¼å¼è‡ªè¡Œæ·»åŠ )
                        file_name.toLowerCase().endsWith(".gif") ||
                        file_name.toLowerCase().endsWith(".mp4")
                    ) {
                        // æ¸…ç©ºæ’å…¥çš„ç¯å¢ƒå˜é‡
                        event.stopPropagation();
                        ea.clear();
                        ea.style.strokeStyle = "solid";
                        ea.style.strokeColor = "transparent";
                        ea.style.backgroundColor = "transparent";
                        ea.style.fillStyle = 'solid';
                        ea.style.roughness = 0;
                        ea.style.strokeWidth = 1;
                        ea.style.fontFamily = 4;

                        let eagleGifFile = app.vault.getAbstractFileByPath(`${relativePath}/${destinationName}`);
                        let id = await await ea.addIFrame(0, 0, 500, 280, 0, eagleGifFile);
                        let el = ea.getElement(id);

                        // ea.style.fillStyle = "solid";
                        el.link = `[[${destinationName}]]`;

                        await ea.addElementsToView(true, false, false);
                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }
                    } else if (
                        //   å¯¹mp3ç­‰éŸ³é¢‘è¿›è¡Œè®¾ç½®(å¯æ ¹æ®éœ€è¦çš„æ ¼å¼è‡ªè¡Œæ·»åŠ )
                        file_name.toLowerCase().endsWith(".mp3") ||
                        file_name.toLowerCase().endsWith(".WAV")
                    ) {
                        // æ¸…ç©ºæ’å…¥çš„ç¯å¢ƒå˜é‡
                        event.stopPropagation();
                        ea.clear();
                        ea.style.strokeStyle = "solid";
                        ea.style.strokeColor = "transparent";
                        ea.style.backgroundColor = "transparent";
                        ea.style.fillStyle = 'solid';
                        ea.style.roughness = 0;
                        ea.style.strokeWidth = 1;
                        ea.style.fontFamily = 4;

                        let eagleGifFile = app.vault.getAbstractFileByPath(`${relativePath}/${destinationName}`);
                        let id = await await ea.addIFrame(0, 0, 400, 80, 0, eagleGifFile);
                        let el = ea.getElement(id);

                        // ea.style.fillStyle = "solid";
                        el.link = `[[${destinationName}]]`;

                        await ea.addElementsToView(true, false, false);
                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }
                    } else {
                        // å…¶ä½™ç»Ÿä¸€æ’å…¥eagleè¿æ¥
                        let id = await ea.addText(0, 0, `[[${insert_txt}]]`, { width: 400, box: true, wrapAt: 100, textAlign: "center", textVerticalAlign: "middle", box: "box" });
                        let el = ea.getElement(id);
                        // å°†el.linkçš„å€¼è®¾ç½®ä¸ºEagleçš„å›é“¾
                        el.link = `eagle://item/${eagle_id}`;
                        await ea.addElementsToView(true, false, false);
                        if (ea.targetView.draginfoDiv) {
                            document.body.removeChild(ea.targetView.draginfoDiv);
                            delete ea.targetView.draginfoDiv;
                        }
                    }
                }
            }
        }
    }
};


```
