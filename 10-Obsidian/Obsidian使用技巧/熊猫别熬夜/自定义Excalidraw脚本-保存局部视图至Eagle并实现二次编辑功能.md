---
uid: 20240819010803
title: è‡ªå®šä¹‰ Excalidraw è„šæœ¬ - ä¿å­˜å±€éƒ¨è§†å›¾è‡³ Eagle å¹¶å®žçŽ°äºŒæ¬¡ç¼–è¾‘åŠŸèƒ½
tags: [Excalidrawè„šæœ¬, Eagle]
description: å¯é€‰ä¸­ Excalidraw ä¸­å±€éƒ¨å…ƒç´ å‘é€åˆ° Eagle()ï¼Œå¯¼å…¥ Eagle é‡Œé¢çš„æ ¼å¼æ˜¯ SVGï¼Œå¯¼å…¥æ—¶å¯è®¾ç½® SVG åç§°ï¼Œæ ‡ç­¾ï¼ŒObsidian æ–‡æ¡£é“¾æŽ¥ï¼ŒEagle ä¸­çš„ SVG å¯åœ¨å®˜æ–¹ Excalidraw ä¸­è¿˜åŽŸã€‚
author: ç†ŠçŒ«åˆ«ç†¬å¤œ
type: other
draft: false
editable: false
modified: 20240819011249
---

# è‡ªå®šä¹‰ Excalidraw è„šæœ¬ - ä¿å­˜å±€éƒ¨è§†å›¾è‡³ Eagle å¹¶å®žçŽ°äºŒæ¬¡ç¼–è¾‘åŠŸèƒ½

å¯é€‰ä¸­ Excalidraw ä¸­å±€éƒ¨å…ƒç´ å‘é€åˆ° Eagle()ï¼Œå¯¼å…¥ Eagle é‡Œé¢çš„æ ¼å¼æ˜¯ SVGï¼Œå¯¼å…¥æ—¶å¯è®¾ç½® SVG åç§°ï¼Œæ ‡ç­¾ï¼ŒObsidian æ–‡æ¡£é“¾æŽ¥ï¼ŒEagle ä¸­çš„ SVG å¯åœ¨å®˜æ–¹ Excalidraw ä¸­è¿˜åŽŸã€‚

![è‡ªå®šä¹‰Excalidrawè„šæœ¬-ä¿å­˜å±€éƒ¨è§†å›¾è‡³Eagleå¹¶å®žçŽ°äºŒæ¬¡ç¼–è¾‘åŠŸèƒ½](https://cdn.pkmer.cn/images/202408190108348.png!pkmer)

> æ³¨ï¼šè¯¥è„šæœ¬å·²é›†åˆåˆ° EagleToExcalidraw è„šæœ¬ä¸­ï¼Œé€‰ä¸­å¤šä¸ª Excalidraw ç”»æ¿ä¸­çš„å…ƒç´ å†è¿è¡Œæ—¢å¯è§¦å‘ã€‚

## è„šæœ¬å®‰è£…

> è¯¦ç»†æ­¥éª¤å‚è€ƒï¼š[ç†ŠçŒ«åˆ«ç†¬å¤œ Excalidraw è„šæœ¬æ±‡æ€»ä»‹ç»](https://pkmer.cn/show/20240323225915 )

å®‰è£…é“¾æŽ¥åŠä»£ç å—ï¼š

````md
```excalidraw-script-install
https://raw.githubusercontent.com/PandaNocturne/ExcalidrawScripts/master/PandaScripts/ShareToEagle.md
```
````

## åŠŸèƒ½æ¼”ç¤º

![PixPin_2024-08-18_12-37-11.gif](https://cdn.pkmer.cn/images/202408190108100.gif!pkmer)

åœ¨ Excalidraw ç”»å¸ƒä¸­æ¡†é€‰ä¸­ä½ æƒ³è¦ä¿å­˜çš„åŒºåŸŸåŽï¼Œè¿è¡Œè¯¥è„šæœ¬ï¼Œå°±ä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œå¯ä»¥è®¾ç½® SVG åç§°ï¼Œæ³¨é‡Šï¼Œæ ‡ç­¾ï¼ŒOb æ–‡æ¡£é“¾æŽ¥ (éœ€è¦ Advanced URI æ’ä»¶)ï¼Œç¡®è®¤åŽæ—¢å¯å‘é€è‡³ Eagle ä¸­ã€‚

![è‡ªå®šä¹‰Excalidrawè„šæœ¬-ä¿å­˜å±€éƒ¨è§†å›¾è‡³Eagleå¹¶å®žçŽ°äºŒæ¬¡ç¼–è¾‘åŠŸèƒ½](https://cdn.pkmer.cn/images/202408190108348.png!pkmer)

### Tipï¼šExcalidraw çš„ SVG æ ¼å¼å¯åœ¨å®˜æ–¹ Excalidraw ä¸­äºŒæ¬¡ç¼–è¾‘

ä¿å­˜åœ¨ Eagle ä¸­çš„ Excalidraw çš„å±€éƒ¨è§†å›¾æ ¼å¼ä¸º SVG æ ¼å¼ï¼Œå¯ä»¥æ‹–åˆ°å®˜æ–¹ Excalidraw è¿˜åŽŸä¸ºåŽŸ Excalidraw æ•°æ®æ¥äºŒæ¬¡ç¼–è¾‘ã€‚

![è‡ªå®šä¹‰Excalidrawè„šæœ¬-ä¿å­˜å±€éƒ¨è§†å›¾è‡³Eagleå¹¶å®žçŽ°äºŒæ¬¡ç¼–è¾‘åŠŸèƒ½](https://cdn.pkmer.cn/images/202408190108220.gif!pkmer)

## æ‹“å±•æ–‡æ¡£

- [[è‡ªå®šä¹‰Excalidrawè„šæœ¬-å»ºç«‹åº“å¤–Eagleç´ æåº“çš„è¿žæŽ¥]]
- [[è‡ªå®šä¹‰Excalidrawè„šæœ¬-å°†é€‰ä¸­å…ƒç´ ä¸ºPNGæˆ–è€…SVGæ ¼å¼æ–‡ä»¶åˆ°æœ¬åœ°]]
- [[QuickeråŠ¨ä½œä¹‹å‘é€Zoteroå›¾ç‰‡æ ‡æ³¨è‡³Eagleç´ æåº“]]

## æºä»£ç 

```js
/*
 * @Author: ç†ŠçŒ«åˆ«ç†¬å¤œ 
 * @Date: 2024-08-19 00:32:03 
 * @Last Modified by:   ç†ŠçŒ«åˆ«ç†¬å¤œ 
 * @Last Modified time: 2024-08-19 00:32:03 
 */
// èŽ·å–é€‰ä¸­å…ƒç´ å¦åˆ™ä¸ºå…¨éƒ¨å…ƒç´ 
let elements = ea.getViewSelectedElements();
const allEls = ea.getViewElements();

if (elements.length === 0) {
  elements = allEls;
  ea.selectElementsInView(elements);
}

// å¦‚æžœé€‰ä¸­å…ƒç´ ä¸­åŒ…å«frameï¼Œåˆ™è‡ªåŠ¨é€‰æ‹©å†…éƒ¨å…ƒç´ 
var frameEls = [];
for (let el of elements) {
  if (el.type === "frame") {
    for (let i of allEls) {
      if (i.frameId === el.id) {
        frameEls.push(i);
      }
    }
  }
}
ea.selectElementsInView([...elements, ...frameEls]);

// èŽ·å–ç¬”è®°çš„åŸºæœ¬è·¯å¾„
const basename = app.workspace.getActiveFile().basename;
let date = window.moment().format("YYYYMMDDHHmmss");

let base64 = "";
await ea.targetView.svg(ea.targetView.getScene(true), undefined, true).then(svg => {
  base64 = `data:image/svg+xml;base64,${btoa(
    unescape(encodeURIComponent(svg.outerHTML)),
  )}`;
});

// =========== é…ç½® =========== //
const data = {
  "url": base64,
  "name": `EX-${date}`,
  "website": "",
  "tags": ["Excalidrawâ†’Eagle"],
  "annotation": "",
  "folderId": "" // å›¾ç‰‡å°†ä¼šæ·»åŠ åˆ°æŒ‡å®šæ–‡ä»¶å¤¹çš„Eagleçš„FolderID
};
let returnLinkEnabled = true;
// é…ç½®æŒ‰é’®
const customControls = (container) => {
  new ea.obsidian.Setting(container)
    .setName(`SVGåç§°`)
    .addText(text => {
      text
        .setValue(data.name)
        .onChange(value => {
          data.name = value;
        });
    });
  new ea.obsidian.Setting(container)
    .setName(`Eagleæ ‡ç­¾`)
    .setDesc(`ç”¨è‹±æ–‡é€—å·(,)åˆ†éš”æ ‡ç­¾`) // æ·»åŠ æè¿°
    .addText(text => {
      text
        .setValue(data.tags.join(',')) // æ•°ç»„è½¬é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²
        .onChange(value => {
          data.tags = value.split(','); // é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²è½¬æ•°ç»„
        });
    });
  new ea.obsidian.Setting(container)
    .setName(`è¿”å›žé“¾æŽ¥`)
    .setDesc(`å¯ç”¨æˆ–ç¦ç”¨Obé“¾æŽ¥ï¼Œéœ€è¦Advanced URIæ’ä»¶`)
    .addToggle(toggle => {
      toggle
        .setValue(returnLinkEnabled) // é»˜è®¤å€¼ä¸ºtrue
        .onChange(value => {
          returnLinkEnabled = value; // æ›´æ–°dataå¯¹è±¡ä¸­çš„å±žæ€§

        });
    });

};

if (returnLinkEnabled) {
  const vaultName = app.vault.getName();
  const activeFile = app.workspace.getActiveFile();
  const ctime = await app.vault.getAbstractFileByPath(activeFile.path).stat["ctime"];
  const uidFormat = "YYYYMMDDhhmmssSSS";
  let adURI = "";
  await app.fileManager.processFrontMatter(activeFile, fm => {
    adURI = fm.uid ? fm.uid : moment(ctime).format(uidFormat);
    fm.uid = moment(ctime).format(uidFormat);
  });
  await ea.addElementsToView();
  data.website = `obsidian://advanced-uri?vault=${vaultName}&uid=${adURI}`;
}

let isSend = false;
data.annotation = await utils.inputPrompt(
  "å¯¼å…¥Eagleçš„æ³¨é‡Š",
  "å‘é€è‡³Eagleçš„SVGçš„æ³¨é‡Š",
  "",
  [
    {
      caption: "Confirm",
      action: () => { isSend = true; return; }
    },
  ],
  5,
  false,
  customControls
);
if (!isSend) return;


const requestOptions = {
  method: 'POST',
  body: JSON.stringify(data),
  redirect: 'follow'
};

let response;
fetch("http://localhost:41595/api/item/addFromURL", requestOptions)
  .then(response => response.json())
  .then(result => {
    console.log(result);
    new Notice("ðŸ“¤å·²æˆåŠŸå‘é€åˆ°Eagleï¼"); // æˆåŠŸåŽæ˜¾ç¤ºé€šçŸ¥
  })
  .catch(error => console.log('error', error));

```