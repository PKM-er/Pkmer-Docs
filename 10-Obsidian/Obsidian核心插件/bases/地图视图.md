---
uid: 20250131213336
title: Bases-地图视图
tags: []
description: 
author: chenghuang,ProudBenzene
type: other
draft: false
editable: false
modified: 20230829102931
---

用户需要在第三方插件市场中下载由Obsidian 官方开发的 [Maps 插件](obsidian://show-plugin?id=maps)方可在数据库中使用地图视图。

在数据库左上角的视图菜单中添加并选择 ![lucide-map.svg > icon](https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/Attachments/icons/lucide-map.svg)**地图**布局以创建一个新的地图视图，它能将文件显示在一张可交互的地图上，鼠标悬停其上时还可在小窗中预览该文件的属性。

![](https://cdn.pkmer.cn/images/bases-map-places.png!pkmer)
## 示例

```
---
coordinates:
  - "48.85837"
  - "2.294481"
icon: "landmark"
color: "red"
tags:
  - places
---
```

以上属性分别的含义如下表所示

| Property      | Value                 | 解释说明                                                |
| ------------- | --------------------- | --------------------------------------------------- |
| `coordinates` | `48.85837` `2.294481` | 坐标以经度和维度表示，右键点击地图上的地点，执行“Copy coordinates”命令即可获取其坐标 |
| `icon`        | `landmark`            | [Lucide library](https://lucide.dev/).的图标名          |
| `color`       | `red`                 | CSS值：可使用 hex, RGB 或直接写出颜色名                          |
| `tags`        | `places`              | 数据库用以识别的标签                                          |

现在试着创建一个地图视图，筛选带有`places`标签的文件，并根据下文的设置项进行设置；也可在 Obsidian 中打开已经配置好的[示例文件](https://github.com/obsidianmd/obsidian-maps/tree/master/examples)以熟悉用法

## 设置

点击视图名右侧箭头打开配置视图菜单，可对以下选项进行设置：

### Markers

#### 坐标

要在地图上显示地点，需要在设置中指定一个笔记属性以存放地点坐标，该属性必须同时包含地点的经度和维度信息，它既可是文字类型，也可以是列表类型：

```
# Text property
coordinates: "经度, 维度"

# List property
coordinates:
  - "经度"
  - "维度"
```

如果经度和维度数据分别储存在两个属性中，则可通过`[latitude, longitude]`这样的格式将其转化为一个公式属性

#### 图标

要为地点添加图标，需要在设置中指定一个笔记属性，然后在 Obsidian 自带的 [图标库](https://lucide.dev/icons/)中选择一个图标并为其赋值，例：`icon: landmark`

如何使用公式属性来赋值图标？比方说，用户现在想要为地图上的所有餐厅使用同一个图标，可以按照以下步骤进行：

1. 创建一个名为“餐厅”的笔记，为其添加笔记属性`icon`，为其赋值`utensils`
2. 为全部餐厅笔记添加笔记属性`type`，为其赋值指向上面创建的“餐厅”笔记
3. 为数据库添加公式属性`type icon`，并为其赋值：`list(type)[0].asFile().properties.icon`
4. 在视图设置中将`type icon`指定为存放图标的属性
5. 现在地图视图将根据地点的类型显示图标，而非地点本身

#### 颜色

- 要为地点设定颜色，需要在设置中指定一个笔记属性，然后根据RGB `rgb(0,0,0)`, HEX `#000`, 或 CSS 变量`var(--color-blue)`为其赋值
- 要为设置动态的颜色，可遵照上文图标的例子为数据库添加公式属性

### 背景

#### 地图瓦片（map tiles）

地图瓦片是展现数字地图的标准方式，用户可自定义地图风格、颜色和字体，地图视图支持栅格瓦片和矢量瓦片，还支持更多瓦片 URL，包括 TileJSON URL

[OpenFreeMap](https://openfreemap.org/) 提供了一些免费样式，下表中列举了一些，将其填入视图设置下的`Map tiles`空白栏即可应用：

|名称|链接|
|---|---|
|Dark|`https://tiles.openfreemap.org/styles/dark`|
|Positron|`https://tiles.openfreemap.org/styles/positron`|
|Liberty|`https://tiles.openfreemap.org/styles/liberty`|

除此之外，还有一些实用链接：

- [Maputnik](https://maputnik.github.io/) 可自定义地图瓦片
- [Protomaps](https://protomaps.com/) 可自部署地图瓦片
-  [MapTiler](https://www.maptiler.com/) 和 [Mapbox](https://www.mapbox.com/) 也提供了免费部署服务

## 窍门

用户可通过公式链接热门地图服务，例：通过以下公式可显示谷歌地图的链接：`link("https://www.google.com/maps/search/" + file.name.replace(" ","+"),"Google Maps")`